(this["webpackJsonpscale-necklace"]=this["webpackJsonpscale-necklace"]||[]).push([[0],{103:function(t,e,n){},117:function(t,e,n){},118:function(t,e,n){"use strict";n.r(e);var a=n(13),c=n(11),r=n.n(c),l=n(41),o=n.n(l),i=(n(103),n(9)),u=n(7),s=n(34),f=n(8),h=n(20),d=[{sharp:"c",flat:"c"},{sharp:"c#",flat:"db"},{sharp:"d",flat:"d"},{sharp:"d#",flat:"eb"},{sharp:"e",flat:"e"},{sharp:"f",flat:"f"},{sharp:"f#",flat:"gb"},{sharp:"g",flat:"g"},{sharp:"g#",flat:"ab"},{sharp:"a",flat:"a"},{sharp:"a#",flat:"bb"},{sharp:"b",flat:"b"}];function g(t){return t<=1?[]:Object(h.flatten)([p(t-1).map((function(t){return{head:[1],tail:t}})),p(t-2).map((function(t){return{head:[1,1],tail:t}}))]).map((function(t){return{tag:"A",scale:t}}))}function p(t){return t<=0?[]:Object(h.flatten)([g(t-3).map((function(t){return{head:[3],tail:t}})),b(t-2).map((function(t){return{head:[2],tail:t}})),b(t-5).map((function(t){return{head:[2,3],tail:t}}))]).map((function(t){return{tag:"B",scale:t}}))}function b(t){return t<0?[]:0==t?[{tag:"C",scale:null}]:Object(h.flatten)([g(t),p(t)]).map((function(t){return{tag:"C",scale:t}}))}function j(t){var e=t.scale.head;return null===t.scale.tail?e:e.concat(m(t.scale.tail))}function m(t){var e=t.scale.head;switch(t.scale.tail.tag){case"A":return e.concat(j(t.scale.tail));case"C":return e.concat(O(t.scale.tail))}}function O(t){if(null===t.scale)return[];switch(t.scale.tag){case"A":return j(t.scale);case"B":return m(t.scale)}}var v=b(d.length).map(O),y=n(42),w=n(43),P=(n(117),n(21)),x=n(27),C=getComputedStyle(document.documentElement).getPropertyValue("--bg"),S=getComputedStyle(document.documentElement).getPropertyValue("--hl"),k=getComputedStyle(document.documentElement).getPropertyValue("--ll"),E=getComputedStyle(document.documentElement).getPropertyValue("--pl");function R(t){return Math.floor(Math.random()*t)}function T(t,e){var n=A(e,t.length);return t.slice(n).concat(t.slice(0,n))}function A(t,e){return(t%e+e)%e}function M(t){return A(t,d.length)}function N(t,e,n){var a=t%n,c=e%n;return Math.round((a-c)/n)*n+c}function I(){var t=r.a.useState(v[0]),e=Object(f.a)(t,2),n=e[0],l=e[1],o=r.a.useState(0),h=Object(f.a)(o,2),g=h[0],p=h[1],b=r.a.useState(0),j=Object(f.a)(b,2),m=j[0],O=j[1],A=Object(c.useState)({loaded:!1}),I=Object(f.a)(A,2),z=I[0],B=I[1],F=r.a.useState({width:window.innerWidth,height:window.innerHeight}),L=Object(f.a)(F,2),V=L[0],D=V.width,H=V.height,J=L[1],W=Object(P.b)({springRoot:m,springOffset:g,config:{tension:40,friction:30,mass:10}}),$=W.springRoot,K=W.springOffset,q=z.loaded&&z.notesToPlay.length>0;r.a.useEffect((function(){var t=function(){return J({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[J]),Object(c.useEffect)((function(){B({loaded:!0,synth:(new y.a).toDestination(),notesToPlay:[]})}),[B]),Object(c.useEffect)((function(){if(z.loaded){var t=Object(s.a)(z.notesToPlay),e=t[0],n=t.slice(1);if(q){var a,c=d[e%d.length];return z.synth.triggerAttack("".concat(c.sharp).concat(e<d.length?Y:Y+1)),a=setInterval((function(){B(Object(u.a)(Object(u.a)({},z),{},{notesToPlay:n}))}),300),function(){z.synth.triggerRelease(),a&&clearInterval(a)}}}}),[z,q]);var G=M(m),Q=M(g),U=function(t){return O(N(G,t,d.length))},X=function(t){return p(N(Q,t,d.length))},Y=3,Z=Math.min(D-30,H-30),_="".concat(Z/50,"pt"),tt=2*Math.PI/d.length,et={"--f":_},nt={"--m":d.length,"--s":"".concat(Z,"px")},at=n.reduce((function(t,e){return t.concat(t[t.length-1]+e)}),[G]),ct=at.map((function(t){return t%d.length})),rt=d.map((function(t,e){return ct.includes(e)})),lt=rt.map((function(t,e){return z.loaded&&z.notesToPlay.length>0&&M(z.notesToPlay[0])==e?E:t?S:k})),ot=w.a().padAngle(.02).innerRadius(Z/2.5).outerRadius(Z/2).startAngle((function(t){return(t-.5)*tt})).endAngle((function(t){return(t+.5)*tt})).cornerRadius(Z),it=d.map((function(t,e){return ot(e)})),ut=Object(x.a)(T(Object(x.a)(rt,lt).map((function(t,e){var n=Object(s.a)(t).slice(0);return[e].concat(Object(i.a)(n))})),G-Q),it),st=d.map((function(t){return t.sharp==t.flat?t.sharp:"".concat(t.sharp,"/").concat(t.flat).replace(/(\w)#/,"$1\u266f").replace(/(\w)b/,"$1\u266d")})),ft=T(Object(x.a)(st,lt),G);return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsxs)("div",{className:"buttons",style:{"--s":"".concat(Z,"px")},children:[Object(a.jsx)("button",{style:et,onClick:function(){U(R(d.length)),X(0)},children:"Randomize Root"}),Object(a.jsx)("button",{style:et,onClick:function(){var t=v[R(v.length)];l(T(t,R(t.length)))},children:"Randomize Scale"}),Object(a.jsx)("button",{style:et,onClick:function(){z.loaded&&B(Object(u.a)(Object(u.a)({},z),{},{notesToPlay:q?[]:at}))},children:q?"Pause":"Play"})]}),Object(a.jsxs)("div",{className:"necklace",children:[ut.map((function(t,e){var c=Object(f.a)(t,2),r=Object(f.a)(c[0],3),o=r[0],i=r[1],u=r[2],s=c[1];return Object(a.jsx)(P.a.svg,{className:"svg",style:{"--r":K.interpolate((function(t){return-t/d.length}))},children:Object(a.jsx)(P.a.path,{className:"path",stroke:u,fill:C,d:s,onClick:function(t){var e=M(Q+(o-G));t.shiftKey?i&&(X(e),l(T(n,ct.indexOf(o)))):(U(o),X(Q+(o-G)))}})},e)})),Object(a.jsx)("div",{className:"note-names",style:nt,children:ft.map((function(t,e){var n=Object(f.a)(t,2),c=n[0],r=n[1];return Object(a.jsx)(P.a.a,{style:Object(u.a)({"--i":$.interpolate((function(t){return e+(G-t)})),"--c":r},et),children:c},e)}))})]})]})}var z=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,119)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,l=e.getTTFB;n(t),a(t),c(t),r(t),l(t)}))};o.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(I,{})}),document.getElementById("root")),z()}},[[118,1,2]]]);
//# sourceMappingURL=main.b3d990b0.chunk.js.map