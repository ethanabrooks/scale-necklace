(this["webpackJsonpscale-necklace"]=this["webpackJsonpscale-necklace"]||[]).push([[0],{103:function(t,e,n){},117:function(t,e,n){},118:function(t,e,n){"use strict";n.r(e);var a=n(13),c=n(10),r=n.n(c),l=n(41),i=n.n(l),o=(n(103),n(9)),s=n(7),u=n(34),f=n(8),h=n(25),d=[{sharp:"c",flat:"c"},{sharp:"c#",flat:"db"},{sharp:"d",flat:"d"},{sharp:"d#",flat:"eb"},{sharp:"e",flat:"e"},{sharp:"f",flat:"f"},{sharp:"f#",flat:"gb"},{sharp:"g",flat:"g"},{sharp:"g#",flat:"ab"},{sharp:"a",flat:"a"},{sharp:"a#",flat:"bb"},{sharp:"b",flat:"b"}];function p(t){return t<=1?[]:Object(h.flatten)([g(t-1).map((function(t){return{head:[1],tail:t}})),g(t-2).map((function(t){return{head:[1,1],tail:t}}))]).map((function(t){return{tag:"A",scale:t}}))}function g(t){return t<=0?[]:Object(h.flatten)([p(t-3).map((function(t){return{head:[3],tail:t}})),b(t-2).map((function(t){return{head:[2],tail:t}})),b(t-5).map((function(t){return{head:[2,3],tail:t}}))]).map((function(t){return{tag:"B",scale:t}}))}function b(t){return t<0?[]:0==t?[{tag:"C",scale:null}]:Object(h.flatten)([p(t),g(t)]).map((function(t){return{tag:"C",scale:t}}))}function j(t){var e=t.scale.head;return null===t.scale.tail?e:e.concat(m(t.scale.tail))}function m(t){var e=t.scale.head;switch(t.scale.tail.tag){case"A":return e.concat(j(t.scale.tail));case"C":return e.concat(O(t.scale.tail))}}function O(t){if(null===t.scale)return[];switch(t.scale.tag){case"A":return j(t.scale);case"B":return m(t.scale)}}var v=b(d.length).map(O),y=n(42),w=n(43),x=(n(117),n(27)),P=n(26),k=getComputedStyle(document.documentElement).getPropertyValue("--hl"),C=getComputedStyle(document.documentElement).getPropertyValue("--ll"),S=getComputedStyle(document.documentElement).getPropertyValue("--pl");function R(t){return Math.floor(Math.random()*t)}function T(t,e){var n=E(e,t.length);return t.slice(n).concat(t.slice(0,n))}function E(t,e){return(t%e+e)%e}function A(t){return E(t,d.length)}function M(t,e){var n=r.a.useRef(null);if(null==n.current)return n.current=t,t;var a=Math.round((n.current-t)/e)*e+t;return n.current=a,a}function N(){var t=r.a.useState(v[0]),e=Object(f.a)(t,2),n=e[0],l=e[1],i=r.a.useState(0),h=Object(f.a)(i,2),p=h[0],g=h[1],b=r.a.useState(0),j=Object(f.a)(b,2),m=j[0],O=j[1],E=Object(c.useState)({loaded:!1}),N=Object(f.a)(E,2),I=N[0],z=N[1],B=r.a.useState({width:window.innerWidth,height:window.innerHeight}),F=Object(f.a)(B,2),L=F[0],V=L.width,D=L.height,H=F[1],J=M(m,d.length),W=M(p,d.length),$=Object(x.b)({springRoot:J,springOffset:W,config:{tension:200,friction:120,mass:10}}),K=$.springRoot,q=$.springOffset,G=I.loaded&&I.notesToPlay.length>0;r.a.useEffect((function(){var t=function(){return H({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}),[H]),Object(c.useEffect)((function(){var t=(new y.a).toDestination();z({loaded:!0,synth:t,notesToPlay:[]})}),[z]),Object(c.useEffect)((function(){if(I.loaded){var t=Object(u.a)(I.notesToPlay),e=t[0],n=t.slice(1);if(G){var a,c=d[e%d.length];return I.synth.triggerAttack("".concat(c.sharp).concat(e<d.length?Q:Q+1)),a=setInterval((function(){z(Object(s.a)(Object(s.a)({},I),{},{notesToPlay:n}))}),300),function(){I.synth.triggerRelease(),a&&clearInterval(a)}}}}),[I,G]);var Q=3,U=Math.min(V-30,D-30),X="".concat(U/50,"pt"),Y=2*Math.PI/d.length,Z={"--f":X},_=function(t){I.loaded&&z(Object(s.a)(Object(s.a)({},I),{},{notesToPlay:G?[]:t}))},tt=n.reduce((function(t,e){return t.concat(t[t.length-1]+e)}),[m]),et=tt.map((function(t){return t%d.length})),nt=d.map((function(t,e){return et.includes(e)})),at=nt.map((function(t,e){return I.loaded&&I.notesToPlay.length>0&&A(I.notesToPlay[0])===e?S:t?k:C})),ct=w.a().padAngle(.05).innerRadius(U/2.8).outerRadius(U/2).startAngle((function(t){return(t-.5)*Y})).endAngle((function(t){return(t+.5)*Y})).cornerRadius(U),rt=d.map((function(t,e){return ct(e)})),lt=Object(P.a)(T(Object(P.a)(nt,at).map((function(t,e){var n=Object(u.a)(t).slice(0);return[e].concat(Object(o.a)(n))})),m-p),rt),it=d.map((function(t){return t.sharp===t.flat?t.sharp:"".concat(t.sharp,"/").concat(t.flat).replace(/(\w)#/,"$1\u266f").replace(/(\w)b/,"$1\u266d")})),ot=T(Object(P.a)(it,at),m);return Object(a.jsxs)("div",{className:"container",style:{"--s":"".concat(U,"px"),"--m":d.length},children:[Object(a.jsxs)("div",{className:"buttons",children:[Object(a.jsx)("button",{style:Z,onClick:function(){O(R(d.length)),g(0),_([])},children:"Randomize Root"}),Object(a.jsx)("button",{style:Z,onClick:function(){var t=v[R(v.length)];l(T(t,R(t.length))),_([])},children:"Randomize Scale"}),Object(a.jsx)("button",{style:Z,onClick:function(){return _(tt)},children:G?"Pause":"Play"}),Object(a.jsx)("span",{style:Z,children:"\xa0"}),Object(a.jsx)("span",{style:Z,children:"Try clicking on a note or shift-clicking on yellow note."})]}),Object(a.jsxs)(x.a.div,{className:"necklace",style:{"--r":q.interpolate((function(t){return-t}))},children:[lt.map((function(t,e){var c=Object(f.a)(t,2),r=Object(f.a)(c[0],3),i=r[0],o=r[1],s=r[2],u=c[1];return Object(a.jsx)("svg",{className:"svg",style:{"--c":s},children:Object(a.jsx)("path",{className:"path",stroke:s,d:u,onClick:function(t){var e=A(p+(i-m));_([]),t.shiftKey?o&&(g(e),l(T(n,et.indexOf(i)))):O(i)}})},e)})),Object(a.jsx)(x.a.div,{className:"note-names",style:{"--a":K.interpolate((function(t){return m-t}))},children:ot.map((function(t,e){var n=Object(f.a)(t,2),c=n[0],r=n[1];return Object(a.jsx)("a",{style:Object(s.a)({"--i":e,"--c":r},Z),children:c},e)}))})]})]})}var I=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,119)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,l=e.getTTFB;n(t),a(t),c(t),r(t),l(t)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(N,{})}),document.getElementById("root")),I()}},[[118,1,2]]]);
//# sourceMappingURL=main.78d61eeb.chunk.js.map