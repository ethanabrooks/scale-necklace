(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{63:function(t,e,a){"use strict";a.d(e,"a",(function(){return D}));var n=a(21),r=a.n(n),c=a(42),l=a.n(c),o=a(14),s=a.n(o),i=a(0),u=a.n(i),f=a(31),h=a(20),p=a(29),d=a(4),g=a(15),b=[{sharp:"c",flat:"c"},{sharp:"c#",flat:"db"},{sharp:"d",flat:"d"},{sharp:"d#",flat:"eb"},{sharp:"e",flat:"e"},{sharp:"f",flat:"f"},{sharp:"f#",flat:"gb"},{sharp:"g",flat:"g"},{sharp:"g#",flat:"ab"},{sharp:"a",flat:"a"},{sharp:"a#",flat:"bb"},{sharp:"b",flat:"b"}],y=b.length;function m(t){return t<=1?[]:Object(g.flatten)([O(t-1).map((function(t){return{head:[1],tail:t}})),O(t-2).map((function(t){return{head:[1,1],tail:t}}))]).map((function(t){return{tag:"A",scale:t}}))}function O(t){return t<=0?[]:Object(g.flatten)([m(t-3).map((function(t){return{head:[3],tail:t}})),P(t-2).map((function(t){return{head:[2],tail:t}})),P(t-5).map((function(t){return{head:[2,3],tail:t}}))]).map((function(t){return{tag:"B",scale:t}}))}function P(t){return t<0?[]:0==t?[{tag:"C",scale:null}]:Object(g.flatten)([m(t),O(t)]).map((function(t){return{tag:"C",scale:t}}))}function j(t){var e=t.scale.head;return null===t.scale.tail?e:e.concat(v(t.scale.tail))}function v(t){var e=t.scale.head;switch(t.scale.tail.tag){case"A":return e.concat(j(t.scale.tail));case"C":return e.concat(w(t.scale.tail))}}function w(t){if(null===t.scale)return[];switch(t.scale.tag){case"A":return j(t.scale);case"B":return v(t.scale)}}var E=P(y).map(w),k=a(2).a.create({container:{flex:1,height:"100%"},button:{flex:1,width:"100%"},necklace:{flex:3,width:"100%",alignItems:"center"}}),S=a(62),x=a(59);function I(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function M(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?I(Object(a),!0).forEach((function(e){r()(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function T(t){return Math.floor(Math.random()*t)}function C(t,e){return t.slice(e).concat(t.slice(0,e))}function D(){var t=u.a.useState(E[0]),e=s()(t,2),a=e[0],n=e[1],r=u.a.useState(0),c=s()(r,2),o=c[0],g=c[1],m=Object(i.useState)({loaded:!1}),O=s()(m,2),P=O[0],j=O[1],v=P.loaded&&P.notesToPlay.length>0;Object(i.useEffect)((function(){var t=(new S.a).toDestination();j({loaded:!0,synth:t,notesToPlay:[]})}),[j]),Object(i.useEffect)((function(){if(P.loaded){var t=l()(P.notesToPlay),e=t[0],a=t.slice(1);if(v){var n,r=b[e%y];return P.synth.triggerAttack(""+r.sharp+(e<y?3:4)),n=setInterval((function(){j(M(M({},P),{},{notesToPlay:a}))}),300),function(){P.synth.triggerRelease(),n&&clearInterval(n)}}}}),[P]);var w=a.reduce((function(t,e){return t.concat(t[t.length-1]+e)}),[o]),I=P.loaded?u.a.createElement(f.a,{title:v?"Pause":"Play",onPress:function(){j(M(M({},P),{},{notesToPlay:v?[]:w}))}}):u.a.createElement(h.a,null,"loading..."),D=u.a.createElement(f.a,{title:"Randomize Root",onPress:function(){return g(T(y))}}),R=u.a.createElement(f.a,{title:"Randomize Scale",onPress:function(){var t=E[T(E.length)];n(C(t,T(t.length)))}}),A=C(b,o),F=u.a.createElement(d.a,{style:{flex:1,width:500}},A.map((function(t,e){return u.a.createElement(x.Spring,{to:{root:o},config:{tension:40},key:e},(function(r){var c,l,s=2*Math.PI*(e+(o-r.root))/y-Math.PI/2,i=(500*(1+Math.cos(s))-500/6)/2,f=500*(1+Math.sin(s))/2,d=((e+o)%(c=y)+c)%c,b=w.map((function(t){return t%y}));return l=P.loaded&&P.notesToPlay[0]%y==d?"#2F4F4F":b.includes(d)?"grey":"lightgrey",u.a.createElement(p.a,{style:{width:500/6,height:500/6,position:"absolute",left:i,top:f,backgroundColor:l,borderRadius:50,alignItems:"center",justifyContent:"center"},onPress:function(t){if(t.shiftKey){var e=w.map((function(t){return t%y}));e.includes(d)&&(n(C(a,e.indexOf(d))),g(d))}else g(d)},key:e},u.a.createElement(h.a,{style:{color:"white"}},t.sharp==t.flat?t.sharp:t.sharp+"/"+t.flat))}))})));return u.a.createElement(d.a,{style:k.container},u.a.createElement(d.a,{style:k.button},D,R,I),u.a.createElement(d.a,{style:k.necklace},F))}},64:function(t,e,a){t.exports=a(86)}},[[64,1,2]]]);
//# sourceMappingURL=app.8b834035.chunk.js.map