(this["webpackJsonpscale-necklace"]=this["webpackJsonpscale-necklace"]||[]).push([[0],{104:function(t,e,n){},123:function(t,e,n){},124:function(t,e,n){"use strict";n.r(e);var a=n(12),c=n(9),r=n.n(c),u=n(43),i=n.n(u),o=(n(104),n(10)),l=n(7),s=n(18),f=n(8),d=n(19),h=[{sharp:"c",flat:"c"},{sharp:"c#",flat:"db"},{sharp:"d",flat:"d"},{sharp:"d#",flat:"eb"},{sharp:"e",flat:"e"},{sharp:"f",flat:"f"},{sharp:"f#",flat:"gb"},{sharp:"g",flat:"g"},{sharp:"g#",flat:"ab"},{sharp:"a",flat:"a"},{sharp:"a#",flat:"bb"},{sharp:"b",flat:"b"}],b=h.length,j=getComputedStyle(document.documentElement).getPropertyValue("--hl"),p=getComputedStyle(document.documentElement).getPropertyValue("--fg"),g=(getComputedStyle(document.documentElement).getPropertyValue("--ll"),getComputedStyle(document.documentElement).getPropertyValue("--pl"));function m(t){return Math.floor(Math.random()*t)}function O(t){return t[m(t.length)]}function v(t,e){var n=y(e,t.length);return t.slice(n).concat(t.slice(0,n))}function y(t,e){return(t%e+e)%e}function w(t){return y(t,h.length)}function x(t,e){var n=r.a.useRef(null);if(null==n.current)return n.current=t,t;var a=Math.round((n.current-t)/e)*e+t;return n.current=a,a}var k=function(t,e){return O(B.filter(Math.random()<t?A:function(t){return!A(t)}).filter(Math.random()<e?L:function(t){return!L(t)}))};function C(t){return 100*B.filter(t).length/B.length}var P=n(35),S=n.n(P);function N(t){return t<=1?[]:Object(d.flatten)([E(t-1).map((function(t){return{head:[1],tail:t}})),E(t-2).map((function(t){return{head:[1,1],tail:t}}))]).map((function(t){return{tag:"A",scale:t}}))}function E(t){return t<=0?[]:Object(d.flatten)([N(t-3).map((function(t){return{head:[3],tail:t}})),R(t-2).map((function(t){return{head:[2],tail:t}})),R(t-5).map((function(t){return{head:[2,3],tail:t}}))]).map((function(t){return{tag:"B",scale:t}}))}function R(t){return t<0?[]:0===t?[{tag:"C",scale:null}]:Object(d.flatten)([N(t),E(t)]).map((function(t){return{tag:"C",scale:t}}))}function T(t){var e=t.scale.head;return null===t.scale.tail?e:e.concat(M(t.scale.tail))}function M(t){var e=t.scale.head;switch(t.scale.tail.tag){case"A":return e.concat(T(t.scale.tail));case"C":return e.concat(V(t.scale.tail))}}function V(t){if(null===t.scale)return[];switch(t.scale.tag){case"A":return T(t.scale);case"B":return M(t.scale)}}function L(t){return Object(d.zip)(t,t.slice(1)).some((function(t){var e=Object(f.a)(t,2),n=e[0],a=e[1];return 1===n&&1===a}))}function A(t){return t.some((function(t){return 3===t}))}function z(t,e){return Object(d.zip)(t,e).every((function(t){var e=Object(f.a)(t,2);return e[0]===e[1]}))}function I(t,e,n,a){if(0===t.length||0===e.length)return!1;var c=Object(s.a)(t),r=c[0],u=c.slice(1),i=Object(s.a)(e),o=i[0],l=i.slice(1);if(S()(r===n[n.length-1]),S()(o===a[a.length-1]),r===o){var f,d=Object(s.a)(n),h=d[0],b=d[1],j=d.slice(2),p=Object(s.a)(a),g=p[0],m=p[1],O=p.slice(2);if(h===m&&b===g&&(f=z(j,O)),h+b===g&&(f=z(j,[m].concat(O))),g+m===h&&(f=z(O,[b].concat(j))),f)return!0}return I(u,l,v(n,1),v(a,1))}var B=Object(d.flatten)(R(b).map(V).map((function(t){return t.map((function(e,n){return v(t,n)}))})));function F(t){return B.filter((function(e){return function(t,e){return I(t,e,v(t,1),v(e,1))}(t,e)}))}var D=n(36),H=n(44),J=(n(123),n(29)),W=n(28),$=function(t){var e=t.value,n=t.setValue;return Object(a.jsx)("input",{type:"range",className:"slider",min:0,max:100,value:e,onChange:function(t){var e=t.target;n(+e.value)}})},q=function(t){var e=t.value,n=t.setValue;return Object(a.jsxs)("label",{className:"switch",children:[Object(a.jsx)("input",{type:"checkbox",onClick:function(){return n(!e)},defaultChecked:!e}),Object(a.jsx)("span",{className:"slide"})]})};function G(){var t=r.a.useState(0),e=Object(f.a)(t,2),n=e[0],c=e[1],u=r.a.useState(0),i=Object(f.a)(u,2),d=i[0],b=i[1],y=r.a.useState(!0),P=Object(f.a)(y,2),S=P[0],N=P[1],E=r.a.useState(C(L)),R=Object(f.a)(E,2),T=R[0],M=R[1],V=r.a.useState(C(A)),z=Object(f.a)(V,2),I=z[0],B=z[1],G=r.a.useState(k(I,T)),K=Object(f.a)(G,2),Q=K[0],U=K[1],X=r.a.useState({loaded:!1}),Y=Object(f.a)(X,2),Z=Y[0],_=Y[1],tt=r.a.useState({width:window.innerWidth,height:window.innerHeight}),et=Object(f.a)(tt,2),nt=et[0],at=nt.width,ct=nt.height,rt=et[1],ut=r.a.useMemo((function(){return new D.a}),[]),it=x(d,h.length),ot=x(n,h.length),lt=Object(J.b)({springRoot:it,springOffset:ot,config:{tension:200,friction:120,mass:10}}),st=lt.springRoot,ft=lt.springOffset,dt=Z.loaded&&Z.notesToPlay.length>0;r.a.useEffect((function(){var t=function(){return rt({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]),r.a.useEffect((function(){var t=function(t){var e=t.key;"Shift"===e&&N(!1),"Enter"===e&&N((function(t){return!t}))},e=function(t){"Shift"===t.key&&N(!0)};return window.addEventListener("keydown",t),window.addEventListener("keyup",e),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",e)}}),[]),r.a.useEffect((function(){if(Z.loaded){var t=Object(s.a)(Z.notesToPlay),e=t[0],n=t.slice(1);if(dt){var a,c=h[e%h.length];return ut.triggerAttack("".concat(c.sharp).concat(e<h.length?3:4)),a=setInterval((function(){_((function(t){return Object(l.a)(Object(l.a)({},t),{},{notesToPlay:n})}))}),300),function(){ut.triggerRelease(),a&&clearInterval(a)}}}else ut.toDestination(),_({loaded:!0,notesToPlay:[]})}),[Z,dt,ut]);var ht=Math.min(at-30,ct-30),bt=2*Math.PI/h.length,jt=H.a().padAngle(.1).innerRadius(ht/2.9).outerRadius(ht/2).startAngle((function(t){return(t-.5)*bt})).endAngle((function(t){return(t+.5)*bt})).cornerRadius(ht),pt=h.map((function(t,e){return jt(e)})),gt=function(t){Z.loaded&&(dt?_(Object(l.a)(Object(l.a)({},Z),{},{notesToPlay:[]})):Object(D.b)().then((function(){return _(Object(l.a)(Object(l.a)({},Z),{},{notesToPlay:t}))})))},mt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.reduce((function(t,e){return t.concat(t[t.length-1]+e)}),[e])}(Q,d),Ot=mt.map((function(t){return t%h.length})),vt=h.map((function(t,e){return Ot.includes(e)})),yt=vt.map((function(t,e){return Z.loaded&&Z.notesToPlay.length>0&&w(Z.notesToPlay[0])===e?g:t?j:p})),wt=Object(W.a)(v(Object(W.a)(vt,yt).map((function(t,e){var n=Object(s.a)(t).slice(0);return[e].concat(Object(o.a)(n))})),d-n),pt),xt=h.map((function(t){return t.sharp===t.flat?t.sharp:"".concat(t.sharp,"/").concat(t.flat).replace(/(\w)#/,"$1\u266f").replace(/(\w)b/,"$1\u266d")})),kt=v(Object(W.a)(xt,yt),d);return Object(a.jsxs)("div",{className:"container",style:{"--s":"".concat(ht,"px"),"--m":h.length},children:[Object(a.jsxs)("div",{className:"buttons",children:[Object(a.jsx)("button",{className:"button",onClick:function(){b(m(h.length)),c(0),gt([])},children:"Randomize Root"}),Object(a.jsx)("button",{className:"button",onClick:function(){return U(k(I,T))},children:"Randomize Scale"}),Object(a.jsx)("button",{className:"button",onClick:function(){var t=F(Q);return console.log(Q),console.log(t),U(O(t))},children:"Random adjacent Scale"}),Object(a.jsx)("button",{className:"button",onClick:function(){return gt(mt)},"aria-pressed":dt,children:dt?"Pause":"Play"}),Object(a.jsx)("span",{className:"static",children:"Click on a note or shift-click on a yellow note."}),Object(a.jsx)(q,{value:S,setValue:N}),Object(a.jsx)("span",{className:"static",children:"Probability of consecutive half-steps"}),Object(a.jsx)($,{value:T,setValue:M}),Object(a.jsx)("span",{className:"static",children:"Probability of augmented 2nd"}),Object(a.jsx)($,{value:I,setValue:B})]}),Object(a.jsxs)(J.a.div,{className:"necklace",style:{"--r":ft.interpolate((function(t){return-t}))},children:[wt.map((function(t,e){var r=Object(f.a)(t,2),u=Object(f.a)(r[0],3),i=u[0],o=u[1],l=u[2],s=r[1];return Object(a.jsx)("svg",{className:"svg",style:{"--c":l},children:Object(a.jsx)("path",{className:"path",stroke:l,d:s,"aria-labelledby":"note".concat(i),role:"button",tabIndex:0,onClick:function(){var t=w(n+(i-d));S?b(i):o&&(c(t),U(v(Q,Ot.indexOf(i))))}})},e)})),Object(a.jsx)(J.a.div,{className:"note-names",style:{"--a":st.interpolate((function(t){return d-t}))},children:kt.map((function(t,e){var n=Object(f.a)(t,2),c=n[0],r=n[1];return Object(a.jsx)("span",{style:{"--i":e,"--c":r},id:"note".concat(d+e),children:c},e)}))})]})]})}var K=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,125)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,u=e.getTTFB;n(t),a(t),c(t),r(t),u(t)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(G,{})}),document.getElementById("root")),K()}},[[124,1,2]]]);
//# sourceMappingURL=main.2ed4a0cd.chunk.js.map